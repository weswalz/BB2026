---
import AdminLayout from '../../../components/admin/AdminLayout.astro';
import { requireAuth } from '../../../lib/auth-middleware.js';

// Check authentication first, before any async operations
const authRedirect = requireAuth(Astro);
if (authRedirect) return authRedirect;

const pages = [
  { name: 'Homepage', url: '/admin/pages/home', description: 'Edit the main landing page content.' },
  { name: 'About Us Page', url: '/admin/pages/about-us', description: 'Manage the content of the About Us page.' },
  { name: 'Box for Us Page', url: '/admin/pages/box-for-us', description: 'Update the Box for Us page content.' },
  { name: 'Contact Us Page', url: '/admin/pages/contact-us', description: 'Modify the Contact Us page details.' },
  { name: 'Upcoming Events Page', url: '/admin/pages/upcoming-events', description: 'Edit the hero and SEO for the upcoming events list.' },
  { name: 'Previous Events Page', url: '/admin/pages/previous-events', description: 'Edit the hero and SEO for the past events list.' },
  { name: 'News Listing Page', url: '/admin/pages/news-listing', description: 'Manage the main news listing page content.' },
  { name: '404 Page', url: '/admin/pages/404', description: 'Edit the content of the 404 error page.' },
];
---

<AdminLayout pageTitle="Edit Pages">
  <style>
    .page-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 1.5rem; }
    .page-card {
      background: var(--admin-bg-secondary);
      border: 1px solid var(--admin-border-subtle);
      border-radius: var(--admin-radius-lg);
      box-shadow: var(--admin-shadow-sm);
      padding: 1.5rem;
      text-decoration: none;
      color: var(--admin-text-primary);
      transition: all var(--admin-transition-base);
      display: block;
    }
    .page-card:hover {
      transform: translateY(-5px);
      box-shadow: var(--admin-shadow-md);
      border-color: var(--admin-border-default);
    }
    .page-card h3 {
      font-size: 1.25rem;
      font-weight: 600;
      color: var(--admin-text-primary);
      margin-bottom: 0.5rem;
    }
    .page-card p {
      color: var(--admin-text-secondary);
      font-size: 0.9rem;
    }
  </style>

  <div class="page-grid">
    {pages.map(page => (
      <a href={page.url} class="page-card">
        <h3>{page.name}</h3>
        <p>{page.description}</p>
      </a>
    ))}
  </div>
</AdminLayout>
